<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Match Out Game</title>
    <link href="../stylesheets/index.css" rel="stylesheet" type="text/css">
</head>
<body> 
    <h1>Find the Difference</h1>
    <!-- Image Map Generated by http://www.image-map.net/ -->
   <h2 id="stats">
    <strong id="timer">time: 00:00</strong>    
    <strong id = "errors">3</strong> lives
    </h2>
   <div id="testContainer" class="container">       
      <!-- <img src="pic1.png~" id="left-image" usemap="#image-map" >
       <map name="image-map">
          <area coords="656,627,699,579" shape="rect" onclick="areaClicked()"> 
          <area id='myarea' target="" alt="" title="" coords="313,404,171" shape="circle">
       </map> -->
       <button>found it</button>
       <h2>INCORRECT</h2>
    </div> 
    <!-- <div class="container" id="right-container">
        <img src="pic1_diff.png~" id="right-image">
    </div> -->

    <script src="../image_resizer.js">

    </script>
    <script>
         imageMapResize();
        //timer
        let timer = document.getElementById('timer')
        let seconds = 0
        let errors = document.getElementById('errors')
        let lives = 3
        let mins = 0
        setInterval( function() {
            seconds++ 
            timer.innerHTML = `${mins}:${seconds}`;
            if (seconds > 59){
                seconds = 0;
                mins++
            }
     
            timer.innerHTML = `${mins}:${seconds}`;
            seconds = pad(seconds);
            mins = pad(mins);
             function pad(unit){
                return (("0") + unit).length > 2 ? unit: "0" + unit
            }
        }, 1000)

        //image map
        let correct1 = document.getElementById('correct1')
        //let areasCollection = document.getElementsByTagName('area')
        /* let areas = Array.from(areasCollection)
        let game_image = document.getElementById('left-image')
        game_image.addEventListener('click', */
        let areasCollection = document.getElementsByTagName('button')
        let areas = Array.from(areasCollection)
        let game_image = document.getElementById('testContainer')
        game_image.addEventListener('click',
         function (x) {
            console.log("image map worked")
            if (areas.includes(x.path[0])) {
                if (x.path[0].getAttribute('found') === 'true'){
                    console.log("you already clicked bum bum")
                    return true
                }else{
                    console.log("correct answer found")
                }
                x.path[0].setAttribute('found', 'true')
            } else {
                console.log("wrong")
                lives = lives - 1
                errors.innerHTML = lives
            }
            if (lives === 0){
                    console.log("game over");
                    window.location.href = "gameOver.html"
            }
        })
        

        // A couple of problems with this function
        // 1. You created it but never called it. When is this supposed to be called?
        //   * perhaps every time the correct selection is clicked
        // 2. Naming a function as a question (e.g.  isThisTrue) tells me that it only checks a condition but doesn't actually do anything, it only returns True or False.  
        //   * This function does a window.location.href, so it's changing something, not just checking a condition. 
        //   * I would rename this function to something like  "nextLevelIfComplete" or something like that.
        // 3. You return true before you do the window.location.href, which means it will never get to the window.location.href.  
        //   * You should return true after the window.location.href
        function isLevelComplete() {
            let areas = document.getElementByTagName('area')

            if (correct1.disabled && correct2.disabled) {
                return true
                window.location.href = "http://127.0.0.1:5500/game-base/gamelevels/levelTwo.js";
            } else {
                return false
            }
        }

     
    </script>
</body>
</html>
